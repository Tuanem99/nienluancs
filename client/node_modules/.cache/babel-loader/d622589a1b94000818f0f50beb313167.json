{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TUAN EM\\\\Desktop\\\\ct271-main\\\\code\\\\client\\\\src\\\\component\\\\Layout\\\\Checkout\\\\Checkout.jsx\",\n    _s = $RefreshSig$();\n\nimport { AppBar, Avatar, Button, Card, CardActions, CardContent, Divider, Grid, makeStyles, Toolbar, Typography } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport InputText from '../../Form-control/InputText';\nimport PaypalExpressBtn from 'react-paypal-express-checkout';\nimport { useSnackbar } from 'notistack';\nimport orderApi from '../../../API/orderAPI';\nimport PropTypes from 'prop-types';\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nCheckout.propTypes = {\n  iduser: PropTypes.number,\n  idsp: PropTypes.number,\n  name: PropTypes.string,\n  phone: PropTypes.string,\n  addr: PropTypes.string,\n  src: PropTypes.string,\n  nameproduct: PropTypes.string,\n  size: PropTypes.string,\n  color: PropTypes.string,\n  soluong: PropTypes.number,\n  gia: PropTypes.number,\n  closeDialog: PropTypes.func\n};\nconst useStyles = makeStyles(theme => ({\n  appBar: {\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    backgroundColor: '#252f3e',\n    color: '#fff',\n    borderTopLeftRadius: '8px',\n    borderTopRightRadius: '8px'\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 200\n  }\n}));\n\nfunction Checkout(props) {\n  _s();\n\n  const classes = useStyles();\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const [ten, setTen] = useState(props.name);\n  const [sdt, setSdt] = useState(props.phone);\n  const [diachi, setDiachi] = useState(props.addr);\n  const env = \"sandbox\";\n  const currency = \"USD\";\n  const client = {\n    sandbox: 'AR5AQIqasdfa_DpobCRxB29pimYqQO30JUa_gDGNGBhXiurfP7yqRez38j7uwpEcAAU7bKkjul2-HntI'\n  };\n  const schema = yup.object().shape({\n    ten: yup.string().required('Không được để trống'),\n    sdt: yup.string().required('Không được để trống'),\n    diachi: yup.string().required('Không được để trống')\n  });\n  const form = useForm({\n    defaultValues: {\n      ten: props.name,\n      sdt: props.phone,\n      diachi: props.addr\n    },\n    resolver: yupResolver(schema)\n  });\n\n  const onSubmit = value => {\n    setTen(value.ten);\n    setSdt(value.sdt);\n    setDiachi(value.diachi);\n    enqueueSnackbar('Cập nhật thành công', {\n      variant: 'success',\n      autoHideDuration: 2000\n    });\n  };\n\n  const onSuccess = async payment => {\n    const value = {};\n    value.iduser = props.iduser;\n    value.phone = sdt;\n    value.address = diachi;\n    value.total = props.gia * props.soluong;\n    value.emailPaypal = payment.email;\n    value.name = ten;\n    const cart = [{\n      idsp: props.idsp,\n      color: props.color,\n      size: props.size,\n      gia: props.gia,\n      soluong: props.soluong\n    }];\n    value.cart = cart;\n\n    try {\n      await orderApi.create(value);\n      enqueueSnackbar('Thanh toán thành công', {\n        variant: 'success',\n        autoHideDuration: 2000\n      });\n    } catch (error) {\n      enqueueSnackbar(error.message, {\n        variant: 'error',\n        autoHideDuration: 2000\n      });\n    }\n\n    if (props.closeDialog) {\n      props.closeDialog();\n    }\n  };\n\n  const onCancel = data => {\n    // User pressed \"cancel\" or close Paypal's popup!\n    console.log(\"The payment was cancelled!\", data);\n    enqueueSnackbar('Bạn đã hủy thanh toán', {\n      variant: 'error',\n      autoHideDuration: 2000\n    }); // You can bind the \"data\" object's value to your state or props or whatever here, please see below for sample returned data\n  };\n\n  const onError = err => {\n    enqueueSnackbar('Có lỗi xảy ra', {\n      variant: 'error',\n      autoHideDuration: 2000\n    }); // The main Paypal's script cannot be loaded or somethings block the loading of that script!\n\n    console.log(\"Error!\", err); // Because the Paypal's main script is loaded asynchronously from \"https://www.paypalobjects.com/api/checkout.js\"\n    // => sometimes it may take about 0.5 second for everything to get set, or for the button to appear\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"mb-16\",\n      children: [/*#__PURE__*/_jsxDEV(AppBar, {\n        className: classes.appBar,\n        position: \"static\",\n        elevation: 0,\n        children: /*#__PURE__*/_jsxDEV(Toolbar, {\n          className: \"pl-16 pr-8\",\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"inherit\",\n            variant: \"h3\",\n            className: \"flex-1 text-center\",\n            children: \"Thanh to\\xE1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: form.handleSubmit(onSubmit),\n        children: [/*#__PURE__*/_jsxDEV(CardContent, {\n          className: \"mx-24\",\n          children: [/*#__PURE__*/_jsxDEV(InputText, {\n            name: \"ten\",\n            lable: \"T\\xEAn\",\n            form: form\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"mx-4\",\n            children: /*#__PURE__*/_jsxDEV(InputText, {\n              name: \"sdt\",\n              lable: \"s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n              form: form\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(InputText, {\n            fullWidth: true,\n            name: \"diachi\",\n            lable: \"\\u0110\\u1ECBa ch\\u1EC9\",\n            form: form\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            size: \"small\",\n            type: \"submit\",\n            className: \"my-2\",\n            children: \"C\\u1EADp nh\\u1EADt th\\xF4ng tin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 2,\n              children: /*#__PURE__*/_jsxDEV(Avatar, {\n                variant: \"square\",\n                style: {\n                  width: '8rem',\n                  height: '8rem'\n                },\n                className: \"my-4\",\n                src: props.src\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 10,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-bold mt-4 text-15\",\n                children: [\" \", props.nameproduct, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-bold mb-4 text-15\",\n                  children: \"Ph\\xE2n lo\\u1EA1i: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-15\",\n                  children: [\" \", props.size, \", \", props.color]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-bold mb-4 text-15\",\n                  children: \"S\\u1ED1 l\\u01B0\\u1EE3ng: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-15\",\n                  children: [\" \", props.soluong]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-bold mb-4 text-15\",\n                  children: \"Gi\\xE1: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-15\",\n                  children: [\" $\", props.gia]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-40\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-bold mb-4 text-15\",\n              children: \"T\\u1ED5ng thanh to\\xE1n:  \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-15\",\n              children: [\" $\", props.gia * props.soluong]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n          className: \"m-24\",\n          children: !!form.getValues('ten') && !!form.getValues('sdt') && !!form.getValues('diachi') ? /*#__PURE__*/_jsxDEV(PaypalExpressBtn, {\n            env: env,\n            client: client,\n            currency: currency,\n            total: props.gia * props.soluong,\n            onError: onError,\n            onSuccess: onSuccess,\n            onCancel: onCancel\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 113\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Nh\\u1EADp th\\xF4ng tin \\u0111\\u1EC3 thanh to\\xE1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 28\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Checkout, \"21WxUwaXPqWpz2mHL5UxBspPI9g=\", false, function () {\n  return [useStyles, useSnackbar, useForm];\n});\n\n_c = Checkout;\nexport default Checkout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["C:/Users/TUAN EM/Desktop/ct271-main/code/client/src/component/Layout/Checkout/Checkout.jsx"],"names":["AppBar","Avatar","Button","Card","CardActions","CardContent","Divider","Grid","makeStyles","Toolbar","Typography","React","useState","useForm","InputText","PaypalExpressBtn","useSnackbar","orderApi","PropTypes","yup","yupResolver","Checkout","propTypes","iduser","number","idsp","name","string","phone","addr","src","nameproduct","size","color","soluong","gia","closeDialog","func","useStyles","theme","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","backgroundColor","borderTopLeftRadius","borderTopRightRadius","formControl","margin","spacing","minWidth","props","classes","enqueueSnackbar","ten","setTen","sdt","setSdt","diachi","setDiachi","env","currency","client","sandbox","schema","object","shape","required","form","defaultValues","resolver","onSubmit","value","variant","autoHideDuration","onSuccess","payment","address","total","emailPaypal","email","cart","error","message","onCancel","data","console","log","onError","err","handleSubmit","width","height","getValues"],"mappings":"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","sourcesContent":["import {\n    AppBar,\n    Avatar,\n    Button,\n    Card,\n    CardActions,\n    CardContent,\n    Divider,\n    Grid,\n    makeStyles,\n    Toolbar,\n    Typography\n} from '@material-ui/core';\nimport React, { useState } from 'react';\nimport {useForm} from 'react-hook-form';\nimport InputText from '../../Form-control/InputText';\nimport PaypalExpressBtn from 'react-paypal-express-checkout';\nimport { useSnackbar } from 'notistack';\nimport orderApi from '../../../API/orderAPI';\nimport PropTypes from 'prop-types';\nimport * as yup from \"yup\";\nimport {yupResolver} from \"@hookform/resolvers/yup\";\n\nCheckout.propTypes = {\n    iduser: PropTypes.number,\n    idsp: PropTypes.number,\n    name: PropTypes.string,\n    phone: PropTypes.string,\n    addr: PropTypes.string,\n    src: PropTypes.string,\n    nameproduct: PropTypes.string,\n    size: PropTypes.string,\n    color: PropTypes.string,\n    soluong: PropTypes.number,\n    gia: PropTypes.number,\n    closeDialog: PropTypes.func\n};\n\nconst useStyles = makeStyles(theme => ({\n    appBar: {\n        transition: theme.transitions.create(['margin', 'width'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        backgroundColor: '#252f3e',\n        color: '#fff',\n        borderTopLeftRadius: '8px',\n        borderTopRightRadius: '8px',\n    },\n    formControl: {\n        margin: theme.spacing(1),\n        minWidth: 200,\n    }\n}));\n\nfunction Checkout(props) {\n    const classes = useStyles();\n    const {enqueueSnackbar} = useSnackbar();\n    const [ten, setTen] = useState(props.name);\n    const [sdt, setSdt] = useState(props.phone);\n    const [diachi, setDiachi] = useState(props.addr);\n    const env = \"sandbox\";\n    const currency = \"USD\";\n    const client = {\n        sandbox: 'AR5AQIqasdfa_DpobCRxB29pimYqQO30JUa_gDGNGBhXiurfP7yqRez38j7uwpEcAAU7bKkjul2-HntI'\n    }\n\n    const schema = yup.object().shape({\n        ten: yup.string()\n            .required('Không được để trống'),\n        sdt: yup.string()\n            .required('Không được để trống'),\n        diachi: yup.string()\n            .required('Không được để trống'),\n    \n    \n    });\n\n    const form = useForm({\n        defaultValues: {\n            ten: props.name,\n            sdt: props.phone,\n            diachi: props.addr\n        },\n        resolver: yupResolver(schema)\n    });\n\n    const onSubmit = value => {\n        setTen(value.ten)\n        setSdt(value.sdt)\n        setDiachi(value.diachi)\n        enqueueSnackbar('Cập nhật thành công', {variant: 'success', autoHideDuration: 2000});\n\n    }\n    const onSuccess = async (payment) => {\n\n        const value = {};\n        value.iduser = props.iduser;\n        value.phone = sdt;\n        value.address = diachi;\n        value.total = props.gia * props.soluong;\n        value.emailPaypal = payment.email;\n        value.name = ten;\n\n        const cart = [{\n            idsp:  props.idsp,\n            color: props.color,\n            size: props.size,\n            gia: props.gia,\n            soluong: props.soluong\n        }]\n\n        value.cart = cart;\n\n        try {\n            await orderApi.create(value)\n            enqueueSnackbar('Thanh toán thành công', {variant: 'success', autoHideDuration: 2000});\n\n        } catch (error) {\n            enqueueSnackbar(error.message, {variant: 'error', autoHideDuration: 2000})\n\n        }\n\n        if(props.closeDialog){\n            props.closeDialog()\n        }\n\n      };\n  \n      const onCancel = data => {\n        // User pressed \"cancel\" or close Paypal's popup!\n        console.log(\"The payment was cancelled!\", data);\n        enqueueSnackbar('Bạn đã hủy thanh toán', {variant: 'error', autoHideDuration: 2000});\n\n        // You can bind the \"data\" object's value to your state or props or whatever here, please see below for sample returned data\n      };\n  \n      const onError = err => {\n        enqueueSnackbar('Có lỗi xảy ra', {variant: 'error', autoHideDuration: 2000});\n\n        // The main Paypal's script cannot be loaded or somethings block the loading of that script!\n        console.log(\"Error!\", err);\n        // Because the Paypal's main script is loaded asynchronously from \"https://www.paypalobjects.com/api/checkout.js\"\n        // => sometimes it may take about 0.5 second for everything to get set, or for the button to appear\n      };\n\n    return (\n        <div>\n            <Card className=\"mb-16\">\n                <AppBar className={classes.appBar} position=\"static\" elevation={0}>\n                    <Toolbar className=\"pl-16 pr-8\">\n                        <Typography color=\"inherit\" variant=\"h3\" className=\"flex-1 text-center\">\n                            Thanh toán\n                        </Typography>\n                    </Toolbar>\n                </AppBar>\n                <form onSubmit={form.handleSubmit(onSubmit)}>\n                    <CardContent className=\"mx-24\">\n                        <InputText name=\"ten\" lable=\"Tên\" form={form}/>\n                        <span className=\"mx-4\">\n                            <InputText name=\"sdt\" lable=\"số điện thoại\" form={form}/>\n                        </span>\n                        <InputText fullWidth name=\"diachi\" lable=\"Địa chỉ\" form={form}/>\n                        <Button\n                            variant=\"contained\"\n                            color=\"primary\"\n                            size=\"small\"\n                            type=\"submit\"\n                            className=\"my-2\"\n                        >Cập nhật thông tin</Button>\n                        <Divider/>\n                        <Grid container>\n                            <Grid item xs={2}>\n                                <Avatar variant=\"square\" style={{width: '8rem', height: '8rem'}} className=\"my-4\"\n                                        src={props.src}/>\n                            </Grid>\n                            <Grid item xs={10}>\n                                <div className=\"font-bold mt-4 text-15\"> {props.nameproduct} </div>\n                                <div>\n                                    <span className=\"font-bold mb-4 text-15\">Phân loại: </span>\n                                    <span className=\"text-15\"> {props.size}, {props.color}</span>\n                                </div>\n                                <div>\n                                    <span className=\"font-bold mb-4 text-15\">Số lượng: </span>\n                                    <span className=\"text-15\"> {props.soluong}</span>\n                                </div>\n                                <div>\n                                    <span className=\"font-bold mb-4 text-15\">Giá: </span>\n                                    <span className=\"text-15\"> ${props.gia}</span>\n                                </div>\n                            </Grid>\n                        </Grid>\n                        <Divider/>\n                        <div className=\"mt-40\">\n                            <span className=\"font-bold mb-4 text-15\">Tổng thanh toán:  </span>\n                            <span className=\"text-15\"> ${props.gia * props.soluong}</span>\n\n                        </div>\n\n                    </CardContent>\n                <CardActions className=\"m-24\">\n                       {(!!form.getValues('ten') && !!form.getValues('sdt')  && !!form.getValues('diachi')) ? ( <PaypalExpressBtn\n                            env={env}\n                            client={client}\n                            currency={currency}\n                            total={props.gia * props.soluong}\n                            onError={onError}\n                            onSuccess={onSuccess}\n                            onCancel={onCancel}\n                    />) : (<div>Nhập thông tin để thanh toán</div>)}\n                </CardActions>\n        </form>\n\n            </Card>\n        </div>\n    );\n}\n\nexport default Checkout;"]},"metadata":{},"sourceType":"module"}